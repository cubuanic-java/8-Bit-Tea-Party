;8-Бит Чаепитие! 2021.
;Лицензия: Creative Commons.
;Платформа: 8086, VGA(256Kb).
;Инструменты: NASM(или иное).
;Модули: VGA-X, VX_SYS.
;Авторы: Дмитрий Галашин (почта).
;Быстродействие: примерное количество тактов для каждой процедуры.
;Память: процед_1 = N, процед_2 занимает М байт.
;Краткая история изменений:
;ДД.ММ.ГГ, И.И.: Короткое сообщение что добавлено, удалено или исправлено.

CPU 8086

%include "VGA-X.ASM"

;Демонстрация работы очистки экрана, заданным цветом(байтом) с учетом страниц.
;Пока прямо сюда поместить код, для удобства отладки, а там уже дальше
;разделим на файл библиотеки и демонстрацию.


        org 100h
        pushf
        ;call near VXSetModeX
        ;mov al,00001111b
        ;call near VXSetPlanes
        ;mov al,00000100b               ;Пример переключения показа страницы.
        ;call near VXSetActDispPage     ;Смотри файл VX_SYS подробнее.

        mov ah,00h              ;Любая
        int 16h
        popf
        ret


;Процедура очистки всей страницы экрана в режиме Х. Простая проверка на ноль.
;Желательно не использовать вызовы дополнительных процедур.
;Вход:
;AL     индекс цвета для очистки всего экрана, 0..255;
;AH     биты:
;0..2   каждый бит если установлен, то очистить соответствующую страницу;
;3      заполнить-ли оставшийся хвост от 256Кб, 31744 байта;
;4..7   резерв.
;Выход: заполненная видеопамять VGA.

VXClearVRAM:
        pushf

        popf
        ret

%include "VX_SYS.ASM"
